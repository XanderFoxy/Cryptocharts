<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Meine Bitget Futures Charts</title>
<script src="https://s3.tradingview.com/tv.js"></script>
<style>
  :root {
    --gap:12px;
    --title-h:36px;
    --bg:#0f1720;
    --panel-bg:#0b1220;
    --radius:8px;
    --shadow:0 6px 18px rgba(2,6,23,0.6);
    --text:#e6eef8;
    --muted:#9fb0c8;
    --active:#10b981;
  }

  body{margin:0;font-family:sans-serif;background:var(--bg);color:var(--text);}
  header{padding:16px;font-size:16px;font-weight:700;display:flex;justify-content:space-between;align-items:center;}
  .theme-toggle{cursor:pointer;padding:6px 12px;border:1px solid var(--muted);border-radius:6px;font-size:14px;background:transparent;color:var(--text);}
  .grid{
    display:grid;
    grid-template-columns:1fr 1fr;
    grid-auto-rows:calc((100vh - 84px - var(--gap))/2);
    gap:var(--gap);
    padding:12px;
    height:calc(100vh - 60px);
  }
  @media(max-width:900px){.grid{grid-template-columns:1fr;grid-auto-rows:300px;}}

  .panel{
    background:var(--panel-bg);
    border-radius:var(--radius);
    overflow:hidden;
    display:flex;
    flex-direction:column;
    position:relative;
    box-shadow:var(--shadow);
    transition:transform .25s ease,width .25s ease,height .25s ease,left .25s ease,top .25s ease;
    border:1px solid rgba(255,255,255,0.03);
  }

  .title{
    height:var(--title-h);
    display:flex;
    align-items:center;
    padding:0 12px;
    cursor:pointer;
    background:linear-gradient(180deg,rgba(255,255,255,0.05),rgba(255,255,255,0.01));
    gap:10px;
    font-size:14px;
    color:var(--text);
    border-bottom:1px solid rgba(255,255,255,0.02);
    user-select:none;
    font-weight:600;
  }
  .title.active { background-color: var(--active); color:white; }

  .dot{width:10px;height:10px;border-radius:50%;background:var(--active);}
  .label{flex:1;}
  .content{flex:1;min-height:0;position:relative;}
  .floating{
    position:fixed !important;
    border-radius:12px !important;
    box-shadow:0 18px 50px rgba(2,6,23,0.8);
    outline:2px solid rgba(16,185,129,0.2);
    z-index:9999 !important;
  }
  .dimmed{filter:brightness(0.8);}
  .overlay-error{
    position:absolute;top:0;left:0;right:0;bottom:0;
    background:rgba(0,0,0,0.7); color:#f66666;
    display:flex; align-items:center; justify-content:center;
    font-size:16px; padding:20px; text-align:center;
    visibility:hidden;
  }
  .error-visible{visibility:visible;}

  body.light {
    --bg:#f8fafc;
    --panel-bg:#ffffff;
    --text:#0f1720;
    --muted:#4b5563;
    --shadow:0 6px 18px rgba(0,0,0,0.1);
  }
</style>
</head>
<body>
<header>
  <div>Meine Bitget Futures Charts (5-Minuten)</div>
  <button class="theme-toggle" id="themeToggle">ðŸŒ™ Dunkel</button>
</header>

<main class="grid" id="grid">
  <div class="panel" id="panel-trump">
    <div class="title" data-panel="panel-trump"><div class="dot"></div><div class="label">TrumpCoin â€” TRUMP/USDT</div></div>
    <div class="content">
      <iframe id="iframe-trump" src="https://www.tradingview.com/chart/?symbol=BITGET:TRUMPUSDT_PERP"></iframe>
      <div class="overlay-error" id="err-trump">iFrame konnte nicht geladen â€” zeige Ã¶ffentliches Chart.</div>
      <div class="widget" id="widget-trump"></div>
    </div>
  </div>

  <div class="panel" id="panel-melania">
    <div class="title" data-panel="panel-melania"><div class="dot"></div><div class="label">MelaniaCoin â€” MELANIA/USDT</div></div>
    <div class="content">
      <iframe id="iframe-melania" src="https://www.tradingview.com/chart/?symbol=BITGET:MELANIAUSDT_PERP"></iframe>
      <div class="overlay-error" id="err-melania">iFrame konnte nicht geladen â€” zeige Ã¶ffentliches Chart.</div>
      <div class="widget" id="widget-melania"></div>
    </div>
  </div>

  <div class="panel" id="panel-etc">
    <div class="title" data-panel="panel-etc"><div class="dot"></div><div class="label">Ethereum Classic â€” ETC/USDT</div></div>
    <div class="content">
      <iframe id="iframe-etc" src="https://www.tradingview.com/chart/?symbol=BITGET:ETCUSDT_PERP"></iframe>
      <div class="overlay-error" id="err-etc">iFrame konnte nicht geladen â€” zeige Ã¶ffentliches Chart.</div>
      <div class="widget" id="widget-etc"></div>
    </div>
  </div>

  <div class="panel" id="panel-near">
    <div class="title" data-panel="panel-near"><div class="dot"></div><div class="label">Near â€” NEAR/USDT</div></div>
    <div class="content">
      <iframe id="iframe-near" src="https://www.tradingview.com/chart/?symbol=BITGET:NEARUSDT_PERP"></iframe>
      <div class="overlay-error" id="err-near">iFrame konnte nicht geladen â€” zeige Ã¶ffentliches Chart.</div>
      <div class="widget" id="widget-near"></div>
    </div>
  </div>

  <div class="panel" id="panel-aia">
    <div class="title" data-panel="panel-aia"><div class="dot"></div><div class="label">AIA â€” AIA/USDT</div></div>
    <div class="content">
      <iframe id="iframe-aia" src="https://www.tradingview.com/chart/?symbol=BITGET:AIAUSDT_PERP"></iframe>
      <div class="overlay-error" id="err-aia">iFrame konnte nicht geladen â€” zeige Ã¶ffentliches Chart.</div>
      <div class="widget" id="widget-aia"></div>
    </div>
  </div>

  <div class="panel" id="panel-pump">
    <div class="title" data-panel="panel-pump"><div class="dot"></div><div class="label">Pump â€” PUMP/USDT</div></div>
    <div class="content">
      <iframe id="iframe-pump" src="https://www.tradingview.com/chart/?symbol=BITGET:PUMPUSDT_PERP"></iframe>
      <div class="overlay-error" id="err-pump">iFrame konnte nicht geladen â€” zeige Ã¶ffentliches Chart.</div>
      <div class="widget" id="widget-pump"></div>
    </div>
  </div>

  <div class="panel" id="panel-btc">
    <div class="title" data-panel="panel-btc"><div class="dot"></div><div class="label">Bitcoin â€” BTC/USDT</div></div>
    <div class="content">
      <iframe id="iframe-btc" src="https://www.tradingview.com/chart/?symbol=BITGET:BTCUSDT_PERP"></iframe>
      <div class="overlay-error" id="err-btc">iFrame konnte nicht geladen â€” zeige Ã¶ffentliches Chart.</div>
      <div class="widget" id="widget-btc"></div>
    </div>
  </div>
</main>

<script>
function createFallbackWidget(containerId,symbol){
  new TradingView.widget({
    container_id: containerId,
    autosize:true,
    symbol:symbol,
    interval:"5",
    timezone:"Europe/Berlin",
    theme:document.body.classList.contains('light')?'light':'dark',
    style:"1",
    locale:"de",
    toolbar_bg:"#0b1220",
    allow_symbol_change:true,
    studies:["MACD@tv-basicstudies","RSI@tv-basicstudies"]
  });
}

function setupChart(iframeId, errDivId, widgetDivId, fallbackSymbol){
  const iframe=document.getElementById(iframeId);
  const errDiv=document.getElementById(errDivId);
  const widgetDiv=document.getElementById(widgetDivId);
  iframe.addEventListener('load',()=>{
    try{
      const doc=iframe.contentWindow.document;
      if(!doc||doc.title===''||doc.body.innerHTML.length<10) throw new Error('Empty or blocked');
      widgetDiv.style.display='none';
    }catch(e){
      iframe.style.display='none';
      errDiv.classList.add('error-visible');
      createFallbackWidget(widgetDivId,fallbackSymbol);
    }
  });
  iframe.addEventListener('error',()=>{
    iframe.style.display='none';
    errDiv.classList.add('error-visible');
    createFallbackWidget(widgetDivId,fallbackSymbol);
  });
}

const panelEls=[...document.querySelectorAll('.panel')];
const titleEls=[...document.querySelectorAll('.title')];

function updateDimmed(){
  const anyFloating=document.querySelector('.panel.floating');
  panelEls.forEach(p=>{
    if(!anyFloating)p.classList.remove('dimmed');
    else p.classList.toggle('dimmed',!p.classList.contains('floating'));
  });
  titleEls.forEach(t=>{
    const id=t.dataset.panel;
    const panel=document.getElementById(id);
    if(panel.classList.contains('floating')) t.classList.add('active');
    else t.classList.remove('active');
  });
}

titleEls.forEach(t=>{
  t.addEventListener('click',()=>{
    const id=t.dataset.panel;
    const panel=document.getElementById(id);
    const floatingNow=panel.classList.contains('floating');
    panelEls.forEach(p=>{p.classList.remove('floating');p.style.position='';p.style.width='';p.style.height='';p.style.left='';p.style.top='';p.style.zIndex='';});
    if(!floatingNow){
      panel.classList.add('floating');
      panel.style.position='fixed';
      const w=Math.min(window.innerWidth*0.9,1200);
      const h=Math.min(window.innerHeight*0.85,800);
      panel.style.width=w+'px';
      panel.style.height=h+'px';
      panel.style.left=(window.innerWidth-w)/2+'px';
      panel.style.top=(window.innerHeight-h)/2+'px';
      panel.style.zIndex=9999;
    }
    updateDimmed();
  });
});

window.addEventListener('keydown',e=>{
  if(e.key==='Escape'){
    panelEls.forEach(p=>{p.classList.remove('floating');p.style.position='';p.style.width='';p.style.height='';p.style.left='';p.style.top='';p.style.zIndex='';});
    updateDimmed();
  }
});

window.addEventListener('resize',()=>{
  const f=document.querySelector('.panel.floating');
  if(f){
    const w=Math.min(window.innerWidth*0.9,1200);
    const h=Math.min(window.innerHeight*0.85,800);
    f.style.width=w+'px';
    f.style.height=h+'px';
    f.style.left=(window.innerWidth-w)/2+'px';
    f.style.top=(window.innerHeight-h)/2+'px';
  }
});

const pairs=['trump','melania','etc','near','aia','pump','btc'];
pairs.forEach(p=>{
  setupChart('iframe-'+p,'err-'+p,'widget-'+p,'BITGET:'+p.toUpperCase()+'USDT_PERP');
});
updateDimmed();

// Theme Toggle
const btn=document.getElementById('themeToggle');
btn.addEventListener('click',()=>{
  document.body.classList.toggle('light');
  const light=document.body.classList.contains('light');
  btn.textContent=light?'ðŸŒž Hell':'ðŸŒ™ Dunkel';
});
</script>
</body>
</html>
